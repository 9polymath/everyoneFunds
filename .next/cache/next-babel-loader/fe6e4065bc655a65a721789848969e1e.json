{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Form, Button, Input, Message, Embed, Dropdown, TextArea } from 'semantic-ui-react';\nimport Layout from '../../components/Layout';\nimport everyoneFunds from '../../ethereum/everyoneFunds';\nimport web3 from '../../ethereum/web3';\nimport { Router } from '../../routes';\n\nvar CampaignNew = /*#__PURE__*/function (_Component) {\n  _inherits(CampaignNew, _Component);\n\n  var _super = _createSuper(CampaignNew);\n\n  function CampaignNew(props) {\n    var _this;\n\n    _classCallCheck(this, CampaignNew);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var name, description, media, location, date, links, _this$state, minimumDonation, targetDonation, info, data, accounts;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n\n                _this.setState({\n                  loading: true,\n                  errorMessage: ''\n                });\n\n                name = _this.name.value;\n                description = _this.description.value;\n                media = _this.media.value;\n                location = _this.location.value;\n                date = _this.date.value;\n                links = _this.links.value;\n                _this$state = _this.state, minimumDonation = _this$state.minimumDonation, targetDonation = _this$state.targetDonation;\n                info = {\n                  name: name,\n                  description: description,\n                  media: media,\n                  location: location,\n                  date: date,\n                  links: links\n                };\n                data = _toConsumableArray(_this.state.data);\n                data.push(info);\n\n                _this.setState({\n                  data: data\n                });\n\n                _context.prev = 13;\n                _context.next = 16;\n                return web3.eth.getAccounts();\n\n              case 16:\n                accounts = _context.sent;\n                _context.next = 19;\n                return everyoneFunds.methods.createCampaign(minimumDonation, web3.utils.toWei(targetDonation, 'ether')).send({\n                  from: accounts[0]\n                });\n\n              case 19:\n                Router.pushRoute('/');\n                _context.next = 25;\n                break;\n\n              case 22:\n                _context.prev = 22;\n                _context.t0 = _context[\"catch\"](13);\n\n                _this.setState({\n                  errorMessage: _context.t0.message\n                });\n\n              case 25:\n                _this.setState({\n                  loading: false\n                });\n\n              case 26:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[13, 22]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _this.state = {\n      minimumDonation: '',\n      targetDonation: '',\n      name: '',\n      description: '',\n      media: '',\n      location: '',\n      date: '',\n      links: '',\n      errorMessage: '',\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(CampaignNew, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Layout, null, __jsx(\"h3\", null, \" Create a New Campaign\"), __jsx(Form, {\n        onSubmit: this.onSubmit,\n        error: !!this.state.errorMessage\n      }, __jsx(Form.Field, null, __jsx(\"label\", null, \" Minimum Donation\"), __jsx(Input, {\n        label: \"wei\",\n        labelPosition: \"right\",\n        value: this.state.minimumDonation,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            minimumDonation: event.target.value\n          });\n        }\n      }), __jsx(\"label\", null, \" Target Donation\"), __jsx(Input, {\n        label: \"ether\",\n        labelPosition: \"right\",\n        value: this.state.targetDonation,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            targetDonation: event.target.value\n          });\n        }\n      }), __jsx(\"label\", null, \" Campaign Name\"), __jsx(Input, {\n        ref: function ref(input) {\n          return _this2.name = input;\n        },\n        onChange: function onChange(event) {\n          return _this2.setState({\n            name: event.target.value\n          });\n        }\n      }), __jsx(\"label\", null, \" Media\"), __jsx(Input, {\n        ref: function ref(input) {\n          return _this2.media = input;\n        },\n        onChange: function onChange(event) {\n          return _this2.setState({\n            media: event.target.value\n          });\n        }\n      }), __jsx(\"label\", null, \" Description\"), __jsx(TextArea, {\n        ref: function ref(input) {\n          return _this2.description = input;\n        },\n        placeholder: \"Description of Campaign\",\n        onChange: function onChange(event) {\n          return _this2.setState({\n            description: event.target.value\n          });\n        }\n      }), __jsx(\"label\", null, \" Location\"), __jsx(Input, {\n        ref: function ref(input) {\n          return _this2.location = input;\n        },\n        onChange: function onChange(event) {\n          return _this2.setState({\n            location: event.target.value\n          });\n        }\n      }), __jsx(\"label\", null, \" Date\"), __jsx(Input, {\n        ref: function ref(input) {\n          return _this2.date = input;\n        },\n        onChange: function onChange(event) {\n          return _this2.setState({\n            date: event.target.value\n          });\n        }\n      }), __jsx(\"label\", null, \" Relevant Links\"), __jsx(Input, {\n        ref: function ref(input) {\n          return _this2.links = input;\n        },\n        onChange: function onChange(event) {\n          return _this2.setState({\n            links: event.target.value\n          });\n        }\n      })), __jsx(Message, {\n        error: true,\n        header: \"Oops!\",\n        content: this.state.errorMessage\n      }), __jsx(Button, {\n        loading: this.state.loading,\n        primary: true\n      }, \"Create\")));\n    }\n  }]);\n\n  return CampaignNew;\n}(Component);\n\nexport default CampaignNew;","map":{"version":3,"sources":["/Users/dolapoolaniawo/Desktop/noin/pages/campaigns/new.js"],"names":["React","Component","Form","Button","Input","Message","Embed","Dropdown","TextArea","Layout","everyoneFunds","web3","Router","CampaignNew","props","event","preventDefault","setState","loading","errorMessage","name","value","description","media","location","date","links","state","minimumDonation","targetDonation","info","data","push","eth","getAccounts","accounts","methods","createCampaign","utils","toWei","send","from","pushRoute","message","onSubmit","target","input"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Form, Button, Input, Message, Embed, Dropdown, TextArea } from 'semantic-ui-react';\nimport Layout from '../../components/Layout';\nimport everyoneFunds from '../../ethereum/everyoneFunds';\nimport web3 from '../../ethereum/web3';\nimport { Router } from '../../routes';\n\n\nclass CampaignNew extends Component {\n    constructor(props){\n    super(props);\n        this.state ={\n            minimumDonation: '',\n            targetDonation: '',\n            name: '',\n            description: '',\n            media: '',\n            location: '',\n            date: '',\n            links: '',\n            errorMessage: '',\n            loading: false\n        };\n    }\n    onSubmit = async (event) => {\n        event.preventDefault();\n        this.setState({loading:true, errorMessage: ''});\n        const name = this.name.value;\n        const description = this.description.value;\n        const media = this.media.value;\n        const location = this.location.value;\n        const date = this.date.value;\n        const links = this.links.value;\n        const {minimumDonation,\n                targetDonation} = this.state;\n        const info = {name: name, description: description, media: media, location: location, date: date, links: links};\n        const data = [...this.state.data];\n        data.push(info);\n            this.setState({data: data});\n        try {\n            const accounts = await web3.eth.getAccounts();\n\n            await everyoneFunds.methods\n                .createCampaign(minimumDonation, web3.utils.toWei(targetDonation, 'ether'))\n                .send({\n                    from: accounts[0]\n                });\n            Router.pushRoute('/');\n        } catch (err) {\n            this.setState({errorMessage: err.message});\n        }\n        this.setState({loading:false});\n    };\n    render() {\n        return (\n            <Layout>\n                <h3> Create a New Campaign</h3>\n                <Form onSubmit = {this.onSubmit} error={!!this.state.errorMessage}>\n                    <Form.Field>\n                        <label> Minimum Donation</label>\n                        <Input label=\"wei\"\n                               labelPosition=\"right\"\n                               value={this.state.minimumDonation}\n                               onChange={event =>\n                                 this.setState({minimumDonation: event.target.value})}\n                        />\n                        <label> Target Donation</label>\n                        <Input label=\"ether\"\n                               labelPosition=\"right\"\n                               value={this.state.targetDonation}\n                               onChange={event =>\n                                 this.setState({targetDonation: event.target.value})}\n                        />\n                        <label> Campaign Name</label>\n                        <Input ref={input => this.name = input}\n                               onChange={event =>\n                                 this.setState({name: event.target.value})}\n                        />\n                        <label> Media</label>\n                        <Input ref={input => this.media = input}\n                               onChange={event =>\n                                 this.setState({media: event.target.value})}\n                        />\n                        <label> Description</label>\n                        <TextArea\n                               ref={input => this.description = input}\n                               placeholder = 'Description of Campaign'\n                               onChange={event =>\n                                 this.setState({description: event.target.value})}\n                        />\n                        <label> Location</label>\n                        <Input ref={input => this.location = input}\n                               onChange={event =>\n                                 this.setState({location: event.target.value})}\n                        />\n                        <label> Date</label>\n                        <Input ref={input => this.date = input}\n                               onChange={event =>\n                                 this.setState({date: event.target.value})}\n                        />\n                        <label> Relevant Links</label>\n                        <Input ref={input => this.links = input}\n                               onChange={event =>\n                                 this.setState({links: event.target.value})}\n                        />\n                    </Form.Field>\n                    <Message error header=\"Oops!\" content={this.state.errorMessage}/>\n                    <Button loading={this.state.loading} primary>Create</Button>\n                </Form>\n             </Layout>\n        );\n    }\n}\nexport default CampaignNew;\n"]},"metadata":{},"sourceType":"module"}