{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport Layout from '../../components/Layout';\nimport Campaign from \"../../ethereum/Campaign\";\nimport { Card, Grid, Button, Message, Form, Progress } from 'semantic-ui-react';\nimport web3 from '../../ethereum/web3';\nimport ContributeForm from '../../components/ContributeForm';\nimport { Link, Router } from '../../routes';\nimport everyoneFunds from \"../../ethereum/everyoneFunds\";\n\nclass CampaignShow extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      data: data,\n      errorMessage: '',\n      loading: false\n    });\n\n    _defineProperty(this, \"onClick\", async event => {\n      event.preventDefault();\n      this.setState({\n        loading: true,\n        errorMessage: ''\n      });\n      const address = Campaign(this.props.address);\n\n      try {\n        const accounts = await web3.eth.getAccounts();\n        await address.methods.endCrowdfunding().send({\n          from: accounts[0]\n        });\n        await everyoneFunds.methods.removeDeployedCampaign().send({\n          from: accounts[0]\n        });\n        Router.pushRoute('/');\n      } catch (err) {\n        this.setState({\n          errorMessage: err.message\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  static async getInitialProps(props) {\n    const campaign = Campaign(props.query.address);\n    const summary = await campaign.methods.getSummary().call();\n    const {\n      data\n    } = this.state.data;\n    return {\n      address: props.query.address,\n      minimumDonation: summary[0],\n      targetDonation: summary[1],\n      balance: summary[2],\n      requestCount: summary[3],\n      approversCount: summary[4],\n      manager: summary[5],\n      name: name,\n      description: description,\n      media: media,\n      location: location,\n      date: date,\n      links: links\n    };\n  }\n\n  renderCards() {\n    const {\n      balance,\n      manager,\n      minimumDonation,\n      targetDonation,\n      requestCount,\n      approversCount\n    } = this.props;\n    const items = [{\n      header: manager,\n      meta: 'Address of Manager',\n      description: 'The manager created this campaign and can create requests to withdraw money',\n      style: {\n        overflowWrap: 'break-word'\n      }\n    }, {\n      header: minimumDonation,\n      meta: 'Minimum Donation (wei)',\n      description: 'You must donate at least this much wei to become an approver'\n    }, {\n      header: web3.utils.fromWei(targetDonation, 'ether'),\n      meta: 'Target Donation (ether)',\n      description: 'This is how much the campaign manager intends to raise with this campaign.'\n    }, {\n      header: requestCount,\n      meta: 'Number of Requests',\n      description: 'A request tries to withdraw money from this contract. Requests must be approved by approvers'\n    }, {\n      header: approversCount,\n      meta: 'Number of Approvers',\n      description: 'Number of people that have donated to this contract.'\n    }, {\n      header: web3.utils.fromWei(balance, 'ether'),\n      meta: 'Campaign Balance (ether)',\n      description: 'The balance is how much money this campaign has left to spend'\n    }];\n    return __jsx(Card.Group, {\n      items: items\n    });\n  }\n\n  render() {\n    const {\n      name,\n      description,\n      media,\n      location,\n      date,\n      links\n    } = this.props;\n    return __jsx(Layout, null, __jsx(\"h4\", null, \" Campaign Details\"), __jsx(\"h2\", null, \" \", name), __jsx(\"p\", null, \" \", description), __jsx(\"p\", null, media), __jsx(Grid, null, __jsx(Grid.Row, null, __jsx(Grid.Column, {\n      width: 10\n    }, this.renderCards()), __jsx(Grid.Column, {\n      width: 6\n    }, __jsx(ContributeForm, {\n      address: this.props.address\n    }), __jsx(\"p\", null, location), __jsx(\"p\", null, date), __jsx(\"p\", null, links))), __jsx(Grid.Row, null, __jsx(Grid.Column, {\n      width: 6\n    }, __jsx(Link, {\n      route: `/campaigns/${this.props.address}/requests`\n    }, __jsx(\"a\", null, __jsx(Button, {\n      primary: true\n    }, \"View Requests\")))), __jsx(Grid.Column, {\n      width: 9\n    }, __jsx(Button, {\n      onClick: this.onClick,\n      loading: this.state.loading,\n      error: !!this.state.errorMessage,\n      negative: true\n    }, \"End Campaign\")))));\n  }\n\n}\n\nexport default CampaignShow;","map":{"version":3,"sources":["/Users/dolapoolaniawo/Desktop/noin/pages/campaigns/show.js"],"names":["React","Component","Layout","Campaign","Card","Grid","Button","Message","Form","Progress","web3","ContributeForm","Link","Router","everyoneFunds","CampaignShow","data","errorMessage","loading","event","preventDefault","setState","address","props","accounts","eth","getAccounts","methods","endCrowdfunding","send","from","removeDeployedCampaign","pushRoute","err","message","getInitialProps","campaign","query","summary","getSummary","call","state","minimumDonation","targetDonation","balance","requestCount","approversCount","manager","name","description","media","location","date","links","renderCards","items","header","meta","style","overflowWrap","utils","fromWei","render","onClick"],"mappings":"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","sourcesContent":["import React, { Component }from 'react';\nimport Layout from '../../components/Layout';\nimport Campaign from \"../../ethereum/Campaign\";\nimport {Card, Grid, Button, Message, Form, Progress} from 'semantic-ui-react';\nimport web3 from '../../ethereum/web3';\nimport ContributeForm from '../../components/ContributeForm';\nimport {Link, Router} from '../../routes';\nimport everyoneFunds from \"../../ethereum/everyoneFunds\";\n\nclass CampaignShow extends Component {\n\n    state={\n        data: data,\n        errorMessage: '',\n        loading: false\n    };\n    static async getInitialProps(props){\n        const campaign = Campaign(props.query.address);\n        const summary =  await campaign.methods.getSummary().call();\n        const {data} = this.state.data;\n        return {\n            address: props.query.address,\n            minimumDonation: summary[0],\n            targetDonation: summary[1],\n            balance: summary[2],\n            requestCount: summary[3],\n            approversCount: summary[4],\n            manager: summary[5],\n            name: name ,\n            description: description ,\n            media: media ,\n            location: location,\n            date: date,\n            links: links\n        };\n    }\n    onClick = async (event) => {\n        event.preventDefault();\n        this.setState({loading:true, errorMessage: ''});\n        const address = Campaign(this.props.address);\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            await address.methods\n                .endCrowdfunding()\n                .send({\n                    from: accounts[0]\n                });\n            await everyoneFunds.methods.removeDeployedCampaign().send({from: accounts[0]});\n            Router.pushRoute('/');\n        } catch (err) {\n            this.setState({errorMessage: err.message});\n        }\n        this.setState({loading:false});\n    };\n    renderCards(){\n        const {\n            balance,\n            manager,\n            minimumDonation,\n            targetDonation,\n            requestCount,\n            approversCount\n        } = this.props;\n        const items = [\n\n            {\n                header: manager,\n                meta: 'Address of Manager',\n            description: 'The manager created this campaign and can create requests to withdraw money',\n            style: {overflowWrap: 'break-word'}\n            },\n            {\n                header: minimumDonation,\n                meta: 'Minimum Donation (wei)',\n            description: 'You must donate at least this much wei to become an approver'\n            },\n            {\n                header: web3.utils.fromWei(targetDonation, 'ether'),\n                meta: 'Target Donation (ether)',\n            description: 'This is how much the campaign manager intends to raise with this campaign.'\n            },\n            {\n                header: requestCount,\n                meta: 'Number of Requests',\n            description: 'A request tries to withdraw money from this contract. Requests must be approved by approvers'\n            },\n            {\n                header: approversCount,\n                meta: 'Number of Approvers',\n            description: 'Number of people that have donated to this contract.'\n            },\n            {\n                header: web3.utils.fromWei(balance, 'ether'),\n                meta: 'Campaign Balance (ether)',\n            description: 'The balance is how much money this campaign has left to spend'\n            }\n\n        ];\n        return <Card.Group items={items}/>\n    }\n    render() {\n        const {name,description, media, location, date, links} = this.props;\n        return (\n            <Layout>\n                <h4> Campaign Details</h4>\n                <h2> {name}</h2>\n                <p> {description}</p>\n                <p>{media}</p>\n                <Grid>\n                    <Grid.Row>\n                        <Grid.Column width={10}>\n                            {this.renderCards()}\n                        </Grid.Column>\n                        <Grid.Column width={6}>\n                            <ContributeForm address={this.props.address}/>\n                            <p>{location}</p>\n                            <p>{date}</p>\n                            <p>{links}</p>\n                        </Grid.Column>\n                    </Grid.Row>\n                    <Grid.Row>\n                        <Grid.Column width={6}>\n                            <Link route={`/campaigns/${this.props.address}/requests`}>\n                                <a>\n                                    <Button primary>View Requests</Button>\n                                </a>\n                            </Link>\n                        </Grid.Column>\n                        <Grid.Column width={9}>\n                            <Button onClick = {this.onClick} loading={this.state.loading} error={!!this.state.errorMessage} negative>End Campaign</Button>\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n            </Layout>\n        );\n    }\n}\n\nexport default CampaignShow;\n"]},"metadata":{},"sourceType":"module"}